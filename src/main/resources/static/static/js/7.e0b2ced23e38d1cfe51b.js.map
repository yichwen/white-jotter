{"version":3,"sources":["webpack:///src/components/admin/user/UserProfile.vue","webpack:///./src/components/admin/user/UserProfile.vue?d3e7","webpack:///./src/components/admin/user/UserProfile.vue","webpack:///src/components/admin/user/BulkRegistration.vue","webpack:///./src/components/admin/user/BulkRegistration.vue?3ea3","webpack:///./src/components/admin/user/BulkRegistration.vue"],"names":["UserProfile","name","components","BulkRegistration","data","users","roles","dialogFormVisible","selectedUser","selectedRolesIds","mounted","this","listUsers","listRoles","computed","tableHeight","window","innerHeight","methods","_this","$axios","get","then","resp","code","result","commitStatusChange","value","user","_this2","username","put","enabled","$message","$alert","onSubmit","_this3","phone","email","message","editUser","roleIds","i","length","push","id","resetPassword","_this4","user_UserProfile","render","_vm","_h","$createElement","_c","_self","attrs","title","visible","on","update:visible","$event","ref","staticStyle","text-align","model","callback","$$v","expression","label","label-width","prop","_v","_s","autocomplete","$set","type","click","_l","role","key","nameZh","staticClass","slot","margin","separator-class","to","path","width","stripe","default-sort","order","max-height","sortable","fit","show-overflow-tooltip","scopedSlots","_u","fn","scope","active-color","inactive-color","change","row","size","float","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","user_BulkRegistration","close","clear","loginForm","rules","label-position","auto-complete","placeholder","background","border","register","required","trigger","password","post","confirmButtonText","$emit","catch","failResponse"],"mappings":"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","file":"static/js/7.e0b2ced23e38d1cfe51b.js","sourcesContent":["<template>\r\n  <div>\r\n    <el-dialog\r\n      title=\"修改用户信息\"\r\n      :visible.sync=\"dialogFormVisible\">\r\n      <el-form v-model=\"selectedUser\" style=\"text-align: left\" ref=\"dataForm\">\r\n        <el-form-item label=\"用户名\" label-width=\"120px\" prop=\"username\">\r\n          <label>{{selectedUser.username}}</label>\r\n        </el-form-item>\r\n        <el-form-item label=\"真实姓名\" label-width=\"120px\" prop=\"name\">\r\n          <el-input v-model=\"selectedUser.name\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"手机号\" label-width=\"120px\" prop=\"phone\">\r\n          <el-input v-model=\"selectedUser.phone\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\" label-width=\"120px\" prop=\"email\">\r\n          <el-input v-model=\"selectedUser.email\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" label-width=\"120px\" prop=\"password\">\r\n          <el-button type=\"warning\" @click=\"resetPassword(selectedUser.username)\">重置密码</el-button>\r\n        </el-form-item>\r\n        <el-form-item label=\"角色分配\" label-width=\"120px\" prop=\"roles\">\r\n          <el-checkbox-group v-model=\"selectedRolesIds\">\r\n              <el-checkbox v-for=\"(role,i) in roles\" :key=\"i\" :label=\"role.id\">{{role.nameZh}}</el-checkbox>\r\n          </el-checkbox-group>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"onSubmit(selectedUser)\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <el-row style=\"margin: 18px 0px 0px 18px \">\r\n      <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n        <el-breadcrumb-item :to=\"{ path: '/admin/dashboard' }\">管理中心</el-breadcrumb-item>\r\n        <el-breadcrumb-item>用户管理</el-breadcrumb-item>\r\n        <el-breadcrumb-item>用户信息</el-breadcrumb-item>\r\n      </el-breadcrumb>\r\n    </el-row>\r\n    <!-- 注册用户之后会调用 listUsers() -->\r\n    <bulk-registration @onSubmit=\"listUsers()\"></bulk-registration>\r\n    <el-card style=\"margin: 18px 2%;width: 95%\">\r\n      <el-table\r\n        :data=\"users\"\r\n        stripe\r\n        :default-sort = \"{prop: 'id', order: 'ascending'}\"\r\n        style=\"width: 100%\"\r\n        :max-height=\"tableHeight\">\r\n        <el-table-column type=\"selection\" width=\"55\"></el-table-column>\r\n        <el-table-column prop=\"id\" label=\"id\" sortable width=\"100\"></el-table-column>\r\n        <el-table-column prop=\"username\" label=\"用户名\" fit></el-table-column>\r\n        <el-table-column prop=\"name\" label=\"真实姓名\" fit></el-table-column>\r\n        <el-table-column prop=\"phone\" label=\"手机号\" fit></el-table-column>\r\n        <el-table-column prop=\"email\" label=\"邮箱\" show-overflow-tooltip fit></el-table-column>\r\n        <el-table-column label=\"状态\" sortable width=\"100\">\r\n          <template slot-scope=\"scope\">\r\n            <el-switch\r\n              v-model=\"scope.row.enabled\"\r\n              active-color=\"#13ce66\"\r\n              inactive-color=\"#ff4949\"\r\n              @change=\"(value) => commitStatusChange(value, scope.row)\">\r\n            </el-switch>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" width=\"120\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button @click=\"editUser(scope.row)\" type=\"text\" size=\"small\">编辑</el-button>\r\n            <el-button type=\"text\" size=\"small\">移除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <div style=\"margin: 20px 0 20px 0;float: left\">\r\n        <el-button>取消选择</el-button>\r\n        <el-button>批量删除</el-button>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport BulkRegistration from './BulkRegistration'\r\nexport default {\r\n  name: 'UserProfile',\r\n  components: {BulkRegistration},\r\n  data () {\r\n    return {\r\n      users: [],\r\n      roles: [],\r\n      dialogFormVisible: false,\r\n      selectedUser: [],\r\n      selectedRolesIds: []\r\n    }\r\n  },\r\n  mounted () {\r\n    this.listUsers()\r\n    this.listRoles()\r\n  },\r\n  computed: {\r\n    tableHeight () {\r\n      return window.innerHeight - 320\r\n    }\r\n  },\r\n  methods: {\r\n    listUsers () {\r\n      var _this = this\r\n      this.$axios.get('/admin/user').then(resp => {\r\n        if (resp && resp.data.code === 200) {\r\n          _this.users = resp.data.result\r\n        }\r\n      })\r\n    },\r\n    listRoles () {\r\n      var _this = this\r\n      this.$axios.get('/admin/role').then(resp => {\r\n        if (resp && resp.data.code === 200) {\r\n          _this.roles = resp.data.result\r\n        }\r\n      })\r\n    },\r\n    commitStatusChange (value, user) {\r\n      if (user.username !== 'admin') {\r\n        this.$axios.put('/admin/user/status', {\r\n          enabled: value,\r\n          username: user.username\r\n        }).then(resp => {\r\n          if (resp && resp.data.code === 200) {\r\n            if (value) {\r\n              this.$message('用户 [' + user.username + '] 已启用')\r\n            } else {\r\n              this.$message('用户 [' + user.username + '] 已禁用')\r\n            }\r\n          }\r\n        })\r\n      } else {\r\n        user.enabled = true\r\n        this.$alert('不能禁用管理员账户')\r\n      }\r\n    },\r\n    onSubmit (user) {\r\n      let _this = this\r\n      // 根据视图绑定的角色 id 向后端传送角色信息\r\n      // let roles = []\r\n      // for (let i = 0; i < _this.selectedRolesIds.length; i++) {\r\n      //   for (let j = 0; j < _this.roles.length; j++) {\r\n      //     if (_this.selectedRolesIds[i] === _this.roles[j].id) {\r\n      //       roles.push(_this.roles[j])\r\n      //     }\r\n      //   }\r\n      // }\r\n      this.$axios.put('/admin/user', {\r\n        username: user.username,\r\n        name: user.name,\r\n        phone: user.phone,\r\n        email: user.email,\r\n        roles: _this.selectedRolesIds\r\n      }).then(resp => {\r\n        if (resp && resp.data.code === 200) {\r\n          this.$alert('用户信息修改成功')\r\n          this.dialogFormVisible = false\r\n          // 修改角色后重新请求用户信息，实现视图更新\r\n          this.listUsers()\r\n        } else {\r\n          this.$alert(resp.data.message)\r\n        }\r\n      })\r\n    },\r\n    editUser (user) {\r\n      this.dialogFormVisible = true\r\n      this.selectedUser = user\r\n      let roleIds = []\r\n      for (let i = 0; i < user.roles.length; i++) {\r\n        roleIds.push(user.roles[i].id)\r\n      }\r\n      this.selectedRolesIds = roleIds\r\n    },\r\n    resetPassword (username) {\r\n      this.$axios.put('/admin/user/password', {\r\n        username: username\r\n      }).then(resp => {\r\n        if (resp && resp.data.code === 200) {\r\n          this.$alert('密码已重置为 123')\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/admin/user/UserProfile.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-dialog',{attrs:{\"title\":\"修改用户信息\",\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{ref:\"dataForm\",staticStyle:{\"text-align\":\"left\"},model:{value:(_vm.selectedUser),callback:function ($$v) {_vm.selectedUser=$$v},expression:\"selectedUser\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"label-width\":\"120px\",\"prop\":\"username\"}},[_c('label',[_vm._v(_vm._s(_vm.selectedUser.username))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"真实姓名\",\"label-width\":\"120px\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.selectedUser.name),callback:function ($$v) {_vm.$set(_vm.selectedUser, \"name\", $$v)},expression:\"selectedUser.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"手机号\",\"label-width\":\"120px\",\"prop\":\"phone\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.selectedUser.phone),callback:function ($$v) {_vm.$set(_vm.selectedUser, \"phone\", $$v)},expression:\"selectedUser.phone\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"label-width\":\"120px\",\"prop\":\"email\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.selectedUser.email),callback:function ($$v) {_vm.$set(_vm.selectedUser, \"email\", $$v)},expression:\"selectedUser.email\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"密码\",\"label-width\":\"120px\",\"prop\":\"password\"}},[_c('el-button',{attrs:{\"type\":\"warning\"},on:{\"click\":function($event){return _vm.resetPassword(_vm.selectedUser.username)}}},[_vm._v(\"重置密码\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"角色分配\",\"label-width\":\"120px\",\"prop\":\"roles\"}},[_c('el-checkbox-group',{model:{value:(_vm.selectedRolesIds),callback:function ($$v) {_vm.selectedRolesIds=$$v},expression:\"selectedRolesIds\"}},_vm._l((_vm.roles),function(role,i){return _c('el-checkbox',{key:i,attrs:{\"label\":role.id}},[_vm._v(_vm._s(role.nameZh))])}),1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onSubmit(_vm.selectedUser)}}},[_vm._v(\"确 定\")])],1)],1),_vm._v(\" \"),_c('el-row',{staticStyle:{\"margin\":\"18px 0px 0px 18px\"}},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/admin/dashboard' }}},[_vm._v(\"管理中心\")]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(\"用户管理\")]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(\"用户信息\")])],1)],1),_vm._v(\" \"),_c('bulk-registration',{on:{\"onSubmit\":function($event){return _vm.listUsers()}}}),_vm._v(\" \"),_c('el-card',{staticStyle:{\"margin\":\"18px 2%\",\"width\":\"95%\"}},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.users,\"stripe\":\"\",\"default-sort\":{prop: 'id', order: 'ascending'},\"max-height\":_vm.tableHeight}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"id\",\"sortable\":\"\",\"width\":\"100\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"用户名\",\"fit\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"真实姓名\",\"fit\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"phone\",\"label\":\"手机号\",\"fit\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"email\",\"label\":\"邮箱\",\"show-overflow-tooltip\":\"\",\"fit\":\"\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"状态\",\"sortable\":\"\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\"},on:{\"change\":function (value) { return _vm.commitStatusChange(value, scope.row); }},model:{value:(scope.row.enabled),callback:function ($$v) {_vm.$set(scope.row, \"enabled\", $$v)},expression:\"scope.row.enabled\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.editUser(scope.row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"}},[_vm._v(\"移除\")])]}}])})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"margin\":\"20px 0 20px 0\",\"float\":\"left\"}},[_c('el-button',[_vm._v(\"取消选择\")]),_vm._v(\" \"),_c('el-button',[_vm._v(\"批量删除\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3d676a38\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/admin/user/UserProfile.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3d676a38\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./UserProfile.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./UserProfile.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./UserProfile.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3d676a38\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./UserProfile.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3d676a38\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/admin/user/UserProfile.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div style=\"text-align: left\">\r\n    <el-button class=\"add-button\" type=\"success\" @click=\"dialogFormVisible = true\">批量添加用户</el-button>\r\n    <el-dialog\r\n      title=\"添加用户\"\r\n      :visible.sync=\"dialogFormVisible\"\r\n      @close=\"clear\"\r\n      width=\"25%\">\r\n      <el-form :model=\"loginForm\" :rules=\"rules\" label-position=\"left\" label-width=\"0px\">\r\n        <el-form-item prop=\"username\">\r\n          <el-input type=\"text\" v-model=\"loginForm.username\" auto-complete=\"off\" placeholder=\"账号\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"password\">\r\n          <el-input type=\"password\" v-model=\"loginForm.password\" auto-complete=\"off\" placeholder=\"密码\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-input type=\"text\" v-model=\"loginForm.name\" auto-complete=\"off\" placeholder=\"真实姓名\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-input type=\"text\" v-model=\"loginForm.phone\" auto-complete=\"off\" placeholder=\"电话号码\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-input type=\"text\" v-model=\"loginForm.email\" auto-complete=\"off\" placeholder=\"E-Mail\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item style=\"width: 100%\">\r\n          <el-button type=\"primary\" style=\"width: 40%;background: #505458;border: none\" v-on:click=\"register\">添加</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'BulkRegistration',\r\n  data () {\r\n    return {\r\n      dialogFormVisible: false,\r\n      rules: {\r\n        username: [{required: true, message: '用户名不能为空', trigger: 'blur'}],\r\n        password: [{required: true, message: '密码不能为空', trigger: 'blur'}]\r\n      },\r\n      loginForm: {\r\n        username: '',\r\n        password: '',\r\n        name: '',\r\n        phone: '',\r\n        email: ''\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    clear () {\r\n      this.loginForm = {\r\n        username: '',\r\n        password: '',\r\n        name: '',\r\n        phone: '',\r\n        email: ''\r\n      }\r\n    },\r\n    register () {\r\n      this.$axios\r\n        .post('/register', {\r\n          username: this.loginForm.username,\r\n          password: this.loginForm.password,\r\n          name: this.loginForm.name,\r\n          phone: this.loginForm.phone,\r\n          email: this.loginForm.email\r\n        })\r\n        .then(resp => {\r\n          if (resp.data.code === 200) {\r\n            this.$alert('注册成功', '提示', {\r\n              confirmButtonText: '确定'\r\n            })\r\n            this.clear()\r\n            this.$emit('onSubmit')\r\n          } else {\r\n            this.$alert(resp.data.message, '提示', {\r\n              confirmButtonText: '确定'\r\n            })\r\n          }\r\n        })\r\n        .catch(failResponse => {})\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .add-button {\r\n    margin: 18px 0 0 10px;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/admin/user/BulkRegistration.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"text-align\":\"left\"}},[_c('el-button',{staticClass:\"add-button\",attrs:{\"type\":\"success\"},on:{\"click\":function($event){_vm.dialogFormVisible = true}}},[_vm._v(\"批量添加用户\")]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"添加用户\",\"visible\":_vm.dialogFormVisible,\"width\":\"25%\"},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event},\"close\":_vm.clear}},[_c('el-form',{attrs:{\"model\":_vm.loginForm,\"rules\":_vm.rules,\"label-position\":\"left\",\"label-width\":\"0px\"}},[_c('el-form-item',{attrs:{\"prop\":\"username\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"auto-complete\":\"off\",\"placeholder\":\"账号\"},model:{value:(_vm.loginForm.username),callback:function ($$v) {_vm.$set(_vm.loginForm, \"username\", $$v)},expression:\"loginForm.username\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"auto-complete\":\"off\",\"placeholder\":\"密码\"},model:{value:(_vm.loginForm.password),callback:function ($$v) {_vm.$set(_vm.loginForm, \"password\", $$v)},expression:\"loginForm.password\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-input',{attrs:{\"type\":\"text\",\"auto-complete\":\"off\",\"placeholder\":\"真实姓名\"},model:{value:(_vm.loginForm.name),callback:function ($$v) {_vm.$set(_vm.loginForm, \"name\", $$v)},expression:\"loginForm.name\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-input',{attrs:{\"type\":\"text\",\"auto-complete\":\"off\",\"placeholder\":\"电话号码\"},model:{value:(_vm.loginForm.phone),callback:function ($$v) {_vm.$set(_vm.loginForm, \"phone\", $$v)},expression:\"loginForm.phone\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-input',{attrs:{\"type\":\"text\",\"auto-complete\":\"off\",\"placeholder\":\"E-Mail\"},model:{value:(_vm.loginForm.email),callback:function ($$v) {_vm.$set(_vm.loginForm, \"email\", $$v)},expression:\"loginForm.email\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticStyle:{\"width\":\"100%\"}},[_c('el-button',{staticStyle:{\"width\":\"40%\",\"background\":\"#505458\",\"border\":\"none\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.register}},[_vm._v(\"添加\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e6c1fe0e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/admin/user/BulkRegistration.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e6c1fe0e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./BulkRegistration.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./BulkRegistration.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./BulkRegistration.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e6c1fe0e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./BulkRegistration.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-e6c1fe0e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/admin/user/BulkRegistration.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}